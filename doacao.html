<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doa√ß√£o - EcoFashion</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/doacao.css" />
</head>
<body>
  <header>
    <div class="logo"><h1>EcoFashion</h1></div>
    <nav role="navigation" aria-label="Main Navigation">
      <ul>
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="produtos.html">Produtos</a></li>
        <li><a href="doacao.html">Doar</a></li>
        <li><a href="sobrenos.html">Sobre n√≥s</a></li>
        <!-- Bot√£o Trevo (vis√≠vel em todas as p√°ginas) -->
        <li><a href="moeda.html" class="btn-trevo" title="Moedas Sustent√°veis">üçÄ</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <section class="doacao-hero" aria-labelledby="doar-titulo">
      <div class="accent-blob"></div>
      <div class="accent-blob left"></div>
      <div class="particles" aria-hidden="true"></div>

      <div class="donation-panel" role="region" aria-labelledby="doar-titulo">
        <div class="donation-copy">
          <h1 id="doar-titulo" class="donation-title">Doar √© Sustent√°vel</h1>
          <p class="donation-sub">Conecte sua doa√ß√£o ao app EcoFashion e transforme pe√ßas em cr√©ditos sustent√°veis. R√°pido, local e respons√°vel.</p>
          <div class="donation-actions">
            <button id="open-cta" class="btn btn-primary" type="button">Doar no App</button>
            <button id="how-btn" class="btn btn-ghost" type="button">Como funciona</button>
          </div>
        </div>
        <div class="donation-art" aria-hidden="true">
          <div class="art-card">
            <div class="art-heart">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M12 20s-6.6-4.35-9.2-7.02C.8 9.9 3.1 5 7.5 5c2.2 0 3.3 1.3 4.5 2.7C13.2 6.3 14.3 5 16.5 5 20.9 5 23.2 9.9 21.2 12.98 18.6 15.65 12 20 12 20z" fill="url(#g)"/>
                <defs>
                  <linearGradient id="g" x1="0" x2="1">
                    <stop offset="0" stop-color="#fff" stop-opacity="0.18" />
                    <stop offset="1" stop-color="#09a24a" />
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <div class="art-caption">Doe. Restaure. Reuse.</div>
          </div>
        </div>
      </div>

      <div id="how" class="como-funciona" aria-hidden="true">
        <h2>Como Funciona</h2>
        <p>Abra o app EcoFashion, fotografe a pe√ßa e registre a doa√ß√£o ‚Äî simples assim. Nosso sistema envia confirma√ß√£o e voc√™ acumula benef√≠cios.</p>
      </div>
    </section>
  </main>

  <!-- Modal estilizado com arte e efeito de brilho -->
  <div id="donation-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true">
    <div class="modal-dialog" role="document" tabindex="-1">
      <button class="modal-close" id="donation-close" aria-label="Fechar">&times;</button>
      <h2 id="modal-title">Abrir Reposit√≥rio do App</h2>
      <p>Ao clicar abaixo, o reposit√≥rio do app EcoFashion ser√° aberto em uma nova janela (ou aba se o popup for bloqueado).</p>
      <div style="margin-top:14px; display:flex; gap:10px; justify-content:flex-end;">
        <button id="modal-cta" class="btn btn-primary" type="button">Abrir reposit√≥rio</button>
        <button id="modal-cancel" class="btn btn-ghost" type="button">Cancelar</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const repo = 'https://github.com/KaueAlvess/EcoFashionApp';
      const openCtaTop = document.getElementById('open-cta');
      const howBtn = document.getElementById('how-btn');
      const modal = document.getElementById('donation-modal');
      const modalCta = document.getElementById('modal-cta');
      const modalCancel = document.getElementById('modal-cancel');
      const closeBtn = document.getElementById('donation-close');

      function openModal(){ if(!modal) return; modal.setAttribute('aria-hidden','false'); modal.querySelector('.modal-dialog').focus(); document.body.style.overflow='hidden'; }
      function closeModal(){ if(!modal) return; modal.setAttribute('aria-hidden','true'); document.body.style.overflow='auto'; if(openCtaTop) openCtaTop.focus(); }

      // helper to open repo in a popup (with new-tab fallback)
      function openRepoPopup(){
        const features = 'toolbar=no,menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,width=1000,height=700';
        try{
          const popup = window.open('', 'ecofRepo', features);
          if(popup){ popup.opener = null; popup.location.href = repo; popup.focus(); return; }
        }catch(err){ /* fall through to fallback */ }
        window.open(repo, '_blank', 'noopener');
      }

      // open modal when top CTA clicked; also open repo popup so users reach the repo directly
      if(openCtaTop) openCtaTop.addEventListener('click', function(){ openModal(); openRepoPopup(); });

      // how button scrolls to the 'how' section
      if(howBtn){ howBtn.addEventListener('click', function(){ const how = document.getElementById('how'); if(how){ how.setAttribute('aria-hidden','false'); how.scrollIntoView({behavior:'smooth', block:'center'}); } }); }

      // modal CTA opens popup (fallback to new tab)
      if(modalCta) modalCta.addEventListener('click', function(){
        openRepoPopup();
        closeModal();
      });

      // cancel and close handlers
      [modalCancel, closeBtn].forEach(btn => { if(btn) btn.addEventListener('click', closeModal); });

      // close when clicking backdrop
      window.addEventListener('click', function(e){ if(e.target === modal){ closeModal(); } });

      // escape key
      window.addEventListener('keydown', function(e){ if(e.key === 'Escape' && modal && modal.getAttribute('aria-hidden') === 'false'){ closeModal(); } });
    })();
  </script>
  <script src="js/script.js"></script>
</body>
</html>