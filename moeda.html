<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Moedas Sustent√°veis - EcoFashion</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/moeda.css">
  <link rel="stylesheet" href="css/produtos.css">
</head>
<body>

  <header>
    <div class="logo">
      <h1>EcoFashion</h1>
    </div>

    <nav role="navigation" aria-label="Main Navigation">
      <ul>
        <li><a href="index.html">Inicio</a></li>
        <li><a href="produtos.html">Produtos</a></li>
        <li><a href="doacao.html">Doar</a></li>
        <li><a href="sobrenos.html">Sobre n√≥s</a></li>
        <!-- Bot√£o Trevo (mantido no header) -->
        <li><a href="moeda.html" class="btn-trevo" title="Moedas Sustent√°veis">üçÄ</a></li>
      </ul>
    </nav>
    <!-- Static mobile menu button fallback (visible when JS injection fails) -->
    <button class="mobile-menu-button" id="mobile-menu-btn-fallback" aria-label="Abrir menu" style="display:none;">‚ò∞</button>
  </header>

  <!-- Static mobile menu overlay (fallback for moeda.html) -->
  <div class="mobile-menu-overlay" id="mobile-menu-overlay-fallback" aria-hidden="true" style="display:none;">
    <div class="mobile-menu" role="menu">
      <button class="close" aria-label="Fechar">‚úï</button>
      <a href="index.html">In√≠cio</a>
      <a href="produtos.html">Produtos</a>
      <a href="doacao.html">Doar</a>
      <a href="sobrenos.html">Sobre n√≥s</a>
      <a href="moeda.html">Trevos</a>
    </div>
  </div>

  <!-- Card centralizado -->
  <div class="container">
    <div class="card-moeda">
      <img src="https://static.vecteezy.com/ti/vetor-gratis/p1/7069441-sorte-trevo-folha-quatro-isolado-no-branco-para-o-dia-de-sao-patrick-vetor.jpg"  alt="Trevo">
      <h2>Troque por Trevos!</h2>
      <p>Aqui na EcoFashion, ao doar roupas voc√™ recebe moedas de troca chamadas <strong>Trevos</strong>. Essas moedas n√£o s√£o descontos ‚Äî elas servem exclusivamente para trocar por produtos dispon√≠veis no cat√°logo do app. Trevos s√£o ganhos somente quando uma doa√ß√£o √© confirmada pela nossa equipe.</p>

      <!-- Bot√£o personalizado (abre modal com o app embutido) -->
      <button id="open-app" class="btn-app" type="button">Funcionalidade dispon√≠vel no app EcoFashion</button>
    </div>
  </div>

  <!-- Modal que carrega app.html dentro de um iframe (permanece na mesma p√°gina) -->
  <div id="app-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="app-modal-title">
    <div class="modal-backdrop" tabindex="-1"></div>
    <div class="modal-dialog" role="document" tabindex="-1">
      <button class="modal-close" id="app-modal-close" aria-label="Fechar">√ó</button>
      <h2 id="app-modal-title">App EcoFashion</h2>
      <div class="modal-content">
        <iframe src="app.html" title="App EcoFashion" frameborder="0" loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <script src="js/script.js"></script>
  <script>
    (function(){
      const openBtn = document.getElementById('open-app');
      const modal = document.getElementById('app-modal');
      const closeBtn = document.getElementById('app-modal-close');

      function openModal(){ if(!modal) return; modal.setAttribute('aria-hidden','false'); const dlg = modal.querySelector('.modal-dialog'); if(dlg) dlg.focus(); document.body.style.overflow='hidden'; }
      function closeModal(){ if(!modal) return; modal.setAttribute('aria-hidden','true'); document.body.style.overflow='auto'; if(openBtn) openBtn.focus(); }

      if(openBtn) openBtn.addEventListener('click', function(){ openModal(); });
      if(closeBtn) closeBtn.addEventListener('click', closeModal);

      // fechar clicando no backdrop
      modal.addEventListener('click', function(e){ if(e.target === modal || e.target.classList.contains('modal-backdrop')) closeModal(); });

      // escape
      window.addEventListener('keydown', function(e){ if(e.key === 'Escape' && modal && modal.getAttribute('aria-hidden') === 'false'){ closeModal(); } });
    })();
  </script>

<!-- Fallback script for static mobile menu button/overlay on moeda.html -->
<script>
  (function(){
    var btn = document.getElementById('mobile-menu-btn-fallback');
    var overlay = document.getElementById('mobile-menu-overlay-fallback');
    if(!btn || !overlay) return;
    function showIfMobile(){
      if(window.innerWidth <= 720){ btn.style.display = 'flex'; }
      else { btn.style.display = 'none'; overlay.style.display='none'; overlay.setAttribute('aria-hidden','true'); }
    }
    // initial
    showIfMobile();
    window.addEventListener('resize', showIfMobile);
    // open/close
    btn.addEventListener('click', function(){ overlay.style.display='flex'; requestAnimationFrame(function(){ overlay.classList.add('open'); overlay.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }); });
    overlay.querySelector('.close').addEventListener('click', function(){ overlay.classList.remove('open'); overlay.setAttribute('aria-hidden','true'); setTimeout(function(){ overlay.style.display='none'; document.body.style.overflow='auto'; btn.focus(); },300); });
    overlay.addEventListener('click', function(e){ if(e.target === overlay) { overlay.classList.remove('open'); overlay.setAttribute('aria-hidden','true'); setTimeout(function(){ overlay.style.display='none'; document.body.style.overflow='auto'; btn.focus(); },300); } });
  })();
</script>

</body>
</html>